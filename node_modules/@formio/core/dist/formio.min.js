!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define([],t):"object"==typeof exports?exports.FormioCore=t():e.FormioCore=t()}(self,(function(){return function(){var e={2937:function(e,t,r){"use strict";var n=this&&this.__spreadArray||function(e,t,r){if(r||2===arguments.length)for(var n,o=0,s=t.length;o<s;o++)!n&&o in t||(n||(n=Array.prototype.slice.call(t,0,o)),n[o]=t[o]);return e.concat(n||Array.prototype.slice.call(t))};Object.defineProperty(t,"__esModule",{value:!0}),t.intersection=t.map=t.head=t.last=t.filter=t.findEach=t.matches=t.findIndex=t.find=t.each=t.dropRight=t.drop=t.difference=t.concat=t.compact=t.chunk=void 0;var o=r(7739),s=r(1769);function i(e,t){var r=Array.isArray(e);for(var n in e)if(e.hasOwnProperty(n)&&!0===t(e[n],r?Number(n):n))break}function a(e,t,r){if(void 0===r&&(r=!1),e){if(Array.isArray(e)&&"function"==typeof t)return r?e.findIndex(t):e.find(t);var n=void 0,o=0;return u(e,t,(function(e,t){return n=e,o=t,!0})),r?o:n}}function c(e){var t=[],r={};return"string"==typeof e?(t=[e],r[e]=!0):(t=Object.keys(e),r=e),function(e){return(0,o.isEqual)((0,s.pick)(e,t),r)}}function u(e,t,r){i(e,(function(e,n){if(c(t)(e)&&!0===r(e,n))return!0}))}t.chunk=function(e,t){return e.reduce((function(e,r,o){return o%t==0?n(n([],e,!0),[[r]],!1):n(n([],e.slice(0,-1),!0),[n(n([],e.slice(-1)[0],!0),[r],!1)],!1)}),[])},t.compact=function(e){return e.filter(Boolean)},t.concat=function(e){for(var t=[],r=1;r<arguments.length;r++)t[r-1]=arguments[r];return e.concat.apply(e,t)},t.difference=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return e.reduce((function(e,t){return e.filter((function(e){return!t.includes(e)}))}))},t.drop=function(e,t){return void 0===t&&(t=1),t>0?e.slice(t):e},t.dropRight=function(e,t){return void 0===t&&(t=1),t>0?e.slice(0,-t):e},t.each=i,t.find=a,t.findIndex=function(e,t){return a(e,t,!0)},t.matches=c,t.findEach=u,t.filter=function(e,t){if(!e)return[];if(t||(t=function(e){return!!e}),Array.isArray(e)&&"function"==typeof t)return e.filter(t);var r=[];return u(e,t,(function(t,n){r.push(t),Array.isArray(t)?e.splice(n,1):delete e[n]})),r},t.last=function(e){return e[e.length-1]},t.head=function(e){return e[0]},t.map=function(e,t){return e.map(t)},t.intersection=function(e,t){return e.filter((function(e){return t.includes(e)}))}},3254:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.debounce=void 0,t.debounce=function(e,t){var r;return void 0===t&&(t=100),function(){for(var n=[],o=0;o<arguments.length;o++)n[o]=arguments[o];r&&clearTimeout(r),r=setTimeout((function(){r=null,e.apply(void 0,n)}),t)}}},2373:function(e,t,r){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var o=Object.getOwnPropertyDescriptor(t,r);o&&!("get"in o?!t.__esModule:o.writable||o.configurable)||(o={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,o)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),o=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),s=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)"default"!==r&&Object.prototype.hasOwnProperty.call(e,r)&&n(t,e,r);return o(t,e),t},i=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||n(t,e,r)},a=this&&this.__spreadArray||function(e,t,r){if(r||2===arguments.length)for(var n,o=0,s=t.length;o<s;o++)!n&&o in t||(n||(n=Array.prototype.slice.call(t,0,o)),n[o]=t[o]);return e.concat(n||Array.prototype.slice.call(t))};Object.defineProperty(t,"__esModule",{value:!0}),t.chain=void 0;var c=s(r(2937)),u=function(){function e(e){this.chain=[],this.currentValue=[],this.currentValue=e}return e.prototype.value=function(){return this.chain.reduce((function(e,t){var r;return(r=c)[t.method].apply(r,a([e],t.args,!1))}),this.currentValue)},e}(),l=function(e){c.hasOwnProperty(e)&&(u.prototype[e]=function(){for(var t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];return this.chain.push({method:e,args:t}),this})};for(var f in c)l(f);function h(e){return new u(e)}t.chain=h,t.default=h,i(r(2937),t),i(r(3254),t),i(r(7739),t),i(r(7592),t),i(r(1769),t),i(r(7150),t)},7739:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.isRegExp=t.isBoolean=t.isNumber=t.isPlainObject=t.isObject=t.isObjectLike=t.isArray=t.isNull=t.isNil=t.isNaN=t.isInteger=t.isEmpty=t.isString=t.isEqual=t.noop=void 0;var n=r(2937);function o(e){return null==e?void 0===e?"[object Undefined]":"[object Null]":Object.prototype.toString.call(e)}function s(e){return"object"==typeof e&&null!==e}function i(e){var t=typeof e;return null!=e&&("object"===t||"function"===t)}t.noop=function(){},t.isEqual=function e(t,r){var o=!1;return t===r||(t&&r&&(Array.isArray(t)||i(t))&&Object.keys(t).length===Object.keys(r).length&&(o=!0,(0,n.each)(t,(function(t,n){return!Array.isArray(t)&&!i(t)||e(r[n],t)?r[n]!==t?(o=!1,!0):void 0:(o=!1,!0)}))),o)},t.isString=function(e){return"string"==typeof e},t.isEmpty=function(e){return[Object,Array].includes((e||{}).constructor)&&!Object.entries(e||{}).length},t.isInteger=function(e){return Number.isInteger(e)},t.isNaN=function(e){return Number.isNaN(e)},t.isNil=function(e){return null==e},t.isNull=function(e){return null===e},t.isArray=function(e){return Array.isArray(e)},t.isObjectLike=s,t.isObject=i,t.isPlainObject=function(e){if(!s(e)||"[object Object]"!=o(e))return!1;if(null===Object.getPrototypeOf(e))return!0;for(var t=e;null!==Object.getPrototypeOf(t);)t=Object.getPrototypeOf(t);return Object.getPrototypeOf(e)===t},t.isNumber=function(e){return"number"==typeof e||s(e)&&"[object Number]"==o(e)},t.isBoolean=function(e){return!0===e||!1===e||s(e)&&"[object Boolean]"==o(e)},t.isRegExp=function(e){return s(e)&&"[object RegExp]"==o(e)}},7592:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.sumBy=t.sum=t.mod=t.subtract=t.round=t.multiply=t.minBy=t.min=t.meanBy=t.mean=t.maxBy=t.max=t.floor=t.divide=t.ceil=t.add=void 0;var n=r(7739),o=r(1769);function s(e,t,r){return void 0===r&&(r=0),r?t(e*(r=Math.pow(10,r)))/r:t(e)}function i(e,t,r){var s=e[0];if(e.length<=1)return s;var i=(0,n.isString)(t);return e.slice(1).reduce((function(e,n){var s=i?(0,o.get)(e,t):t(e),a=i?(0,o.get)(n,t):t(n);return r(s,a)===a?n:e}),s)}function a(e,t){return e+t}function c(e){return e.reduce(a,0)}function u(e,t){return function(e,t,r){var s=e[0];if(e.length<=1)return s;var i=(0,n.isString)(t);return e.slice(1).reduce((function(e,r){return n=e,s=i?(0,o.get)(r,t):t(r),n+s;var n,s}),i?(0,o.get)(s,t):t(s))}(e,t)}t.add=a,t.ceil=function(e,t){return void 0===t&&(t=0),s(e,Math.ceil,t)},t.divide=function(e,t){return e/t},t.floor=function(e,t){return void 0===t&&(t=0),s(e,Math.floor,t)},t.max=function(e){return Math.max.apply(Math,e)},t.maxBy=function(e,t){return i(e,t,Math.max)},t.mean=function(e){return c(e)/e.length},t.meanBy=function(e,t){return u(e,t)/e.length},t.min=function(e){return Math.min.apply(Math,e)},t.minBy=function(e,t){return i(e,t,Math.min)},t.multiply=function(e,t){return e*t},t.round=function(e,t){return void 0===t&&(t=0),s(e,Math.round,t)},t.subtract=function(e,t){return e-t},t.mod=function(e,t){return e%t},t.sum=c,t.sumBy=u},1769:function(e,t,r){"use strict";var n=this&&this.__assign||function(){return n=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var o in t=arguments[r])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},n.apply(this,arguments)},o=this&&this.__spreadArray||function(e,t,r){if(r||2===arguments.length)for(var n,o=0,s=t.length;o<s;o++)!n&&o in t||(n||(n=Array.prototype.slice.call(t,0,o)),n[o]=t[o]);return e.concat(n||Array.prototype.slice.call(t))};Object.defineProperty(t,"__esModule",{value:!0}),t.pick=t.defaults=t.cloneDeep=t.clone=t.fastCloneDeep=t.merge=t.set=t.has=t.propertyOf=t.property=t.get=t.pathParts=t.values=t.keys=void 0;var s=r(7739),i=r(2937);function a(e){return e?("["===e[0]&&(e=e.replace(/^\[([^\]]+)\]/,"$1")),e.replace(/\[/g,".").replace(/\]/g,"").split(".")):[]}function c(e,t,r){var n=a(t).reduce((function(e,t){return(e||{})[t]}),e);return void 0!==r&&void 0===n?r:n}function u(e,t){try{return t in e}catch(e){return!1}}function l(e,t){return u(e,t)&&!(Object.hasOwnProperty.call(e,t)&&Object.propertyIsEnumerable.call(e,t))}function f(e){return Array.isArray(e)?e.map(f):null===e||"object"!=typeof e?e:Object.fromEntries(Object.entries(e).map((function(e){return[e[0],f(e[1])]})))}t.keys=function(e){return Object.keys(e)},t.values=function(e){return(0,s.isArray)(e)?e:Object.values(e)},t.pathParts=a,t.get=c,t.property=function(e){return function(t){return c(t,e)}},t.propertyOf=function(e){return function(t){return c(e,t)}},t.has=function(e,t){return void 0!==c(e,t,void 0)},t.set=function(e,t,r){var n=a(t);return n.reduce((function(e,t,o){return isNaN(Number(t))||(t=Number(t)),((Array.isArray(e)?t>=e.length:!e.hasOwnProperty(t))||o<n.length-1&&!Array.isArray(e[t])&&!(0,s.isObject)(e[t]))&&(e[t]=isNaN(Number(n[o+1]))?{}:[]),o===n.length-1&&(e[t]=r),e[t]}),e),e},t.merge=function e(){for(var t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];var n=t.shift();return t.reduce((function(r,n,o){return r&&r!==n?(0,s.isArray)(n)?((0,s.isArray)(r)||(t[o]=r=[]),function(t,r){return r.forEach((function(r,n){t[n]=e(t[n],r)})),t}(r,n)):(0,s.isPlainObject)(n)?function(t,r){for(var n in r)if(r.hasOwnProperty(n)){if(l(t,n))return;u(t,n)?t[n]=e(t[n],r[n]):t[n]=f(r[n])}return t}(r,n):f(n):f(n)}),n)},t.fastCloneDeep=function(e){try{return JSON.parse(JSON.stringify(e))}catch(e){return console.log("Clone Failed: ".concat(e.message)),null}},t.clone=function(e){return Array.isArray(e)?o([],e,!0):n({},e)},t.cloneDeep=f,t.defaults=function(e,t){return(0,i.each)(t,(function(t,r){e.hasOwnProperty(r)||(e[r]=t)})),e},t.pick=function(e,t){return t.reduce((function(t,r){return e&&e.hasOwnProperty(r)&&(t[r]=e[r]),t}),{})}},7150:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.endsWith=t.trim=void 0,t.trim=function(e,t){return void 0===t&&(t="\\s"),e.replace(new RegExp("^([".concat(t,"]*)(.*?)([").concat(t,"]*)$")),"$2")},String.prototype.endsWith||(String.prototype.endsWith=function(e,t){return(void 0===t||t>this.length)&&(t=this.length),this.substring(t-e.length,t)===e}),t.endsWith=function(e,t){return e.endsWith(t)}},4389:function(e,t){t.defaults={},t.set=function(e,r,n){var o=n||{},s=t.defaults,i=o.expires||s.expires,a=o.domain||s.domain,c=void 0!==o.path?o.path:void 0!==s.path?s.path:"/",u=void 0!==o.secure?o.secure:s.secure,l=void 0!==o.httponly?o.httponly:s.httponly,f=void 0!==o.samesite?o.samesite:s.samesite,h=i?new Date("number"==typeof i?(new Date).getTime()+864e5*i:i):0;document.cookie=e.replace(/[^+#$&^`|]/g,encodeURIComponent).replace("(","%28").replace(")","%29")+"="+r.replace(/[^+#$&/:<-\[\]-}]/g,encodeURIComponent)+(h&&h.getTime()>=0?";expires="+h.toUTCString():"")+(a?";domain="+a:"")+(c?";path="+c:"")+(u?";secure":"")+(l?";httponly":"")+(f?";samesite="+f:"")},t.get=function(e){for(var t=document.cookie.split(";");t.length;){var r=t.pop(),n=r.indexOf("=");if(n=n<0?r.length:n,decodeURIComponent(r.slice(0,n).replace(/^\s+/,""))===e)return decodeURIComponent(r.slice(n+1))}return null},t.erase=function(e,r){t.set(e,"",{expires:-1,domain:r&&r.domain,path:r&&r.path,secure:0,httponly:0})},t.all=function(){for(var e={},t=document.cookie.split(";");t.length;){var r=t.pop(),n=r.indexOf("=");n=n<0?r.length:n,e[decodeURIComponent(r.slice(0,n).replace(/^\s+/,""))]=decodeURIComponent(r.slice(n+1))}return e}},6729:function(e){"use strict";var t=Object.prototype.hasOwnProperty,r="~";function n(){}function o(e,t,r){this.fn=e,this.context=t,this.once=r||!1}function s(e,t,n,s,i){if("function"!=typeof n)throw new TypeError("The listener must be a function");var a=new o(n,s||e,i),c=r?r+t:t;return e._events[c]?e._events[c].fn?e._events[c]=[e._events[c],a]:e._events[c].push(a):(e._events[c]=a,e._eventsCount++),e}function i(e,t){0==--e._eventsCount?e._events=new n:delete e._events[t]}function a(){this._events=new n,this._eventsCount=0}Object.create&&(n.prototype=Object.create(null),(new n).__proto__||(r=!1)),a.prototype.eventNames=function(){var e,n,o=[];if(0===this._eventsCount)return o;for(n in e=this._events)t.call(e,n)&&o.push(r?n.slice(1):n);return Object.getOwnPropertySymbols?o.concat(Object.getOwnPropertySymbols(e)):o},a.prototype.listeners=function(e){var t=r?r+e:e,n=this._events[t];if(!n)return[];if(n.fn)return[n.fn];for(var o=0,s=n.length,i=new Array(s);o<s;o++)i[o]=n[o].fn;return i},a.prototype.listenerCount=function(e){var t=r?r+e:e,n=this._events[t];return n?n.fn?1:n.length:0},a.prototype.emit=function(e,t,n,o,s,i){var a=r?r+e:e;if(!this._events[a])return!1;var c,u,l=this._events[a],f=arguments.length;if(l.fn){switch(l.once&&this.removeListener(e,l.fn,void 0,!0),f){case 1:return l.fn.call(l.context),!0;case 2:return l.fn.call(l.context,t),!0;case 3:return l.fn.call(l.context,t,n),!0;case 4:return l.fn.call(l.context,t,n,o),!0;case 5:return l.fn.call(l.context,t,n,o,s),!0;case 6:return l.fn.call(l.context,t,n,o,s,i),!0}for(u=1,c=new Array(f-1);u<f;u++)c[u-1]=arguments[u];l.fn.apply(l.context,c)}else{var h,p=l.length;for(u=0;u<p;u++)switch(l[u].once&&this.removeListener(e,l[u].fn,void 0,!0),f){case 1:l[u].fn.call(l[u].context);break;case 2:l[u].fn.call(l[u].context,t);break;case 3:l[u].fn.call(l[u].context,t,n);break;case 4:l[u].fn.call(l[u].context,t,n,o);break;default:if(!c)for(h=1,c=new Array(f-1);h<f;h++)c[h-1]=arguments[h];l[u].fn.apply(l[u].context,c)}}return!0},a.prototype.on=function(e,t,r){return s(this,e,t,r,!1)},a.prototype.once=function(e,t,r){return s(this,e,t,r,!0)},a.prototype.removeListener=function(e,t,n,o){var s=r?r+e:e;if(!this._events[s])return this;if(!t)return i(this,s),this;var a=this._events[s];if(a.fn)a.fn!==t||o&&!a.once||n&&a.context!==n||i(this,s);else{for(var c=0,u=[],l=a.length;c<l;c++)(a[c].fn!==t||o&&!a[c].once||n&&a[c].context!==n)&&u.push(a[c]);u.length?this._events[s]=1===u.length?u[0]:u:i(this,s)}return this},a.prototype.removeAllListeners=function(e){var t;return e?(t=r?r+e:e,this._events[t]&&i(this,t)):(this._events=new n,this._eventsCount=0),this},a.prototype.off=a.prototype.removeListener,a.prototype.addListener=a.prototype.on,a.prefixed=r,a.EventEmitter=a,e.exports=a},7559:function(e,t,r){var n;!function(o){"use strict";function s(e){var r=e&&e.Promise||o.Promise,n=e&&e.XMLHttpRequest||o.XMLHttpRequest;return function(){var e=Object.create(o,{fetch:{value:void 0,writable:!0}});return function(t){var o=void 0!==e&&e||"undefined"!=typeof self&&self||void 0!==o&&o,s="URLSearchParams"in o,i="Symbol"in o&&"iterator"in Symbol,a="FileReader"in o&&"Blob"in o&&function(){try{return new Blob,!0}catch(e){return!1}}(),c="FormData"in o,u="ArrayBuffer"in o;if(u)var l=["[object Int8Array]","[object Uint8Array]","[object Uint8ClampedArray]","[object Int16Array]","[object Uint16Array]","[object Int32Array]","[object Uint32Array]","[object Float32Array]","[object Float64Array]"],f=ArrayBuffer.isView||function(e){return e&&l.indexOf(Object.prototype.toString.call(e))>-1};function h(e){if("string"!=typeof e&&(e=String(e)),/[^a-z0-9\-#$%&'*+.^_`|~!]/i.test(e)||""===e)throw new TypeError("Invalid character in header field name");return e.toLowerCase()}function p(e){return"string"!=typeof e&&(e=String(e)),e}function d(e){var t={next:function(){var t=e.shift();return{done:void 0===t,value:t}}};return i&&(t[Symbol.iterator]=function(){return t}),t}function m(e){this.map={},e instanceof m?e.forEach((function(e,t){this.append(t,e)}),this):Array.isArray(e)?e.forEach((function(e){this.append(e[0],e[1])}),this):e&&Object.getOwnPropertyNames(e).forEach((function(t){this.append(t,e[t])}),this)}function y(e){if(e.bodyUsed)return r.reject(new TypeError("Already read"));e.bodyUsed=!0}function g(e){return new r((function(t,r){e.onload=function(){t(e.result)},e.onerror=function(){r(e.error)}}))}function b(e){var t=new FileReader,r=g(t);return t.readAsArrayBuffer(e),r}function v(e){if(e.slice)return e.slice(0);var t=new Uint8Array(e.byteLength);return t.set(new Uint8Array(e)),t.buffer}function j(){return this.bodyUsed=!1,this._initBody=function(e){var t;this.bodyUsed=this.bodyUsed,this._bodyInit=e,e?"string"==typeof e?this._bodyText=e:a&&Blob.prototype.isPrototypeOf(e)?this._bodyBlob=e:c&&FormData.prototype.isPrototypeOf(e)?this._bodyFormData=e:s&&URLSearchParams.prototype.isPrototypeOf(e)?this._bodyText=e.toString():u&&a&&((t=e)&&DataView.prototype.isPrototypeOf(t))?(this._bodyArrayBuffer=v(e.buffer),this._bodyInit=new Blob([this._bodyArrayBuffer])):u&&(ArrayBuffer.prototype.isPrototypeOf(e)||f(e))?this._bodyArrayBuffer=v(e):this._bodyText=e=Object.prototype.toString.call(e):this._bodyText="",this.headers.get("content-type")||("string"==typeof e?this.headers.set("content-type","text/plain;charset=UTF-8"):this._bodyBlob&&this._bodyBlob.type?this.headers.set("content-type",this._bodyBlob.type):s&&URLSearchParams.prototype.isPrototypeOf(e)&&this.headers.set("content-type","application/x-www-form-urlencoded;charset=UTF-8"))},a&&(this.blob=function(){var e=y(this);if(e)return e;if(this._bodyBlob)return r.resolve(this._bodyBlob);if(this._bodyArrayBuffer)return r.resolve(new Blob([this._bodyArrayBuffer]));if(this._bodyFormData)throw new Error("could not read FormData body as blob");return r.resolve(new Blob([this._bodyText]))},this.arrayBuffer=function(){return this._bodyArrayBuffer?y(this)||(ArrayBuffer.isView(this._bodyArrayBuffer)?r.resolve(this._bodyArrayBuffer.buffer.slice(this._bodyArrayBuffer.byteOffset,this._bodyArrayBuffer.byteOffset+this._bodyArrayBuffer.byteLength)):r.resolve(this._bodyArrayBuffer)):this.blob().then(b)}),this.text=function(){var e,t,n,o=y(this);if(o)return o;if(this._bodyBlob)return e=this._bodyBlob,t=new FileReader,n=g(t),t.readAsText(e),n;if(this._bodyArrayBuffer)return r.resolve(function(e){for(var t=new Uint8Array(e),r=new Array(t.length),n=0;n<t.length;n++)r[n]=String.fromCharCode(t[n]);return r.join("")}(this._bodyArrayBuffer));if(this._bodyFormData)throw new Error("could not read FormData body as text");return r.resolve(this._bodyText)},c&&(this.formData=function(){return this.text().then(O)}),this.json=function(){return this.text().then(JSON.parse)},this}m.prototype.append=function(e,t){e=h(e),t=p(t);var r=this.map[e];this.map[e]=r?r+", "+t:t},m.prototype.delete=function(e){delete this.map[h(e)]},m.prototype.get=function(e){return e=h(e),this.has(e)?this.map[e]:null},m.prototype.has=function(e){return this.map.hasOwnProperty(h(e))},m.prototype.set=function(e,t){this.map[h(e)]=p(t)},m.prototype.forEach=function(e,t){for(var r in this.map)this.map.hasOwnProperty(r)&&e.call(t,this.map[r],r,this)},m.prototype.keys=function(){var e=[];return this.forEach((function(t,r){e.push(r)})),d(e)},m.prototype.values=function(){var e=[];return this.forEach((function(t){e.push(t)})),d(e)},m.prototype.entries=function(){var e=[];return this.forEach((function(t,r){e.push([r,t])})),d(e)},i&&(m.prototype[Symbol.iterator]=m.prototype.entries);var w=["DELETE","GET","HEAD","OPTIONS","POST","PUT"];function U(e,t){if(!(this instanceof U))throw new TypeError('Please use the "new" operator, this DOM object constructor cannot be called as a function.');var r,n,o=(t=t||{}).body;if(e instanceof U){if(e.bodyUsed)throw new TypeError("Already read");this.url=e.url,this.credentials=e.credentials,t.headers||(this.headers=new m(e.headers)),this.method=e.method,this.mode=e.mode,this.signal=e.signal,o||null==e._bodyInit||(o=e._bodyInit,e.bodyUsed=!0)}else this.url=String(e);if(this.credentials=t.credentials||this.credentials||"same-origin",!t.headers&&this.headers||(this.headers=new m(t.headers)),this.method=(r=t.method||this.method||"GET",n=r.toUpperCase(),w.indexOf(n)>-1?n:r),this.mode=t.mode||this.mode||null,this.signal=t.signal||this.signal,this.referrer=null,("GET"===this.method||"HEAD"===this.method)&&o)throw new TypeError("Body not allowed for GET or HEAD requests");if(this._initBody(o),!("GET"!==this.method&&"HEAD"!==this.method||"no-store"!==t.cache&&"no-cache"!==t.cache)){var s=/([?&])_=[^&]*/;if(s.test(this.url))this.url=this.url.replace(s,"$1_="+(new Date).getTime());else{this.url+=(/\?/.test(this.url)?"&":"?")+"_="+(new Date).getTime()}}}function O(e){var t=new FormData;return e.trim().split("&").forEach((function(e){if(e){var r=e.split("="),n=r.shift().replace(/\+/g," "),o=r.join("=").replace(/\+/g," ");t.append(decodeURIComponent(n),decodeURIComponent(o))}})),t}function _(e,t){if(!(this instanceof _))throw new TypeError('Please use the "new" operator, this DOM object constructor cannot be called as a function.');t||(t={}),this.type="default",this.status=void 0===t.status?200:t.status,this.ok=this.status>=200&&this.status<300,this.statusText="statusText"in t?t.statusText:"",this.headers=new m(t.headers),this.url=t.url||"",this._initBody(e)}U.prototype.clone=function(){return new U(this,{body:this._bodyInit})},j.call(U.prototype),j.call(_.prototype),_.prototype.clone=function(){return new _(this._bodyInit,{status:this.status,statusText:this.statusText,headers:new m(this.headers),url:this.url})},_.error=function(){var e=new _(null,{status:0,statusText:""});return e.type="error",e};var k=[301,302,303,307,308];_.redirect=function(e,t){if(-1===k.indexOf(t))throw new RangeError("Invalid status code");return new _(null,{status:t,headers:{location:e}})},t.DOMException=o.DOMException;try{new t.DOMException}catch(e){t.DOMException=function(e,t){this.message=e,this.name=t;var r=Error(e);this.stack=r.stack},t.DOMException.prototype=Object.create(Error.prototype),t.DOMException.prototype.constructor=t.DOMException}function x(e,s){return new r((function(r,i){var c=new U(e,s);if(c.signal&&c.signal.aborted)return i(new t.DOMException("Aborted","AbortError"));var l=new n;function f(){l.abort()}l.onload=function(){var e,t,n={status:l.status,statusText:l.statusText,headers:(e=l.getAllResponseHeaders()||"",t=new m,e.replace(/\r?\n[\t ]+/g," ").split("\r").map((function(e){return 0===e.indexOf("\n")?e.substr(1,e.length):e})).forEach((function(e){var r=e.split(":"),n=r.shift().trim();if(n){var o=r.join(":").trim();t.append(n,o)}})),t)};n.url="responseURL"in l?l.responseURL:n.headers.get("X-Request-URL");var o="response"in l?l.response:l.responseText;setTimeout((function(){r(new _(o,n))}),0)},l.onerror=function(){setTimeout((function(){i(new TypeError("Network request failed"))}),0)},l.ontimeout=function(){setTimeout((function(){i(new TypeError("Network request failed"))}),0)},l.onabort=function(){setTimeout((function(){i(new t.DOMException("Aborted","AbortError"))}),0)},l.open(c.method,function(e){try{return""===e&&o.location.href?o.location.href:e}catch(t){return e}}(c.url),!0),"include"===c.credentials?l.withCredentials=!0:"omit"===c.credentials&&(l.withCredentials=!1),"responseType"in l&&(a?l.responseType="blob":u&&c.headers.get("Content-Type")&&-1!==c.headers.get("Content-Type").indexOf("application/octet-stream")&&(l.responseType="arraybuffer")),!s||"object"!=typeof s.headers||s.headers instanceof m?c.headers.forEach((function(e,t){l.setRequestHeader(t,e)})):Object.getOwnPropertyNames(s.headers).forEach((function(e){l.setRequestHeader(e,p(s.headers[e]))})),c.signal&&(c.signal.addEventListener("abort",f),l.onreadystatechange=function(){4===l.readyState&&c.signal.removeEventListener("abort",f)}),l.send(void 0===c._bodyInit?null:c._bodyInit)}))}x.polyfill=!0,o.fetch||(o.fetch=x,o.Headers=m,o.Request=U,o.Response=_),t.Headers=m,t.Request=U,t.Response=_,t.fetch=x,Object.defineProperty(t,"__esModule",{value:!0})}(t),{fetch:e.fetch,Headers:e.Headers,Request:e.Request,Response:e.Response,DOMException:e.DOMException}}()}void 0===(n=function(){return s}.call(t,r,t,e))||(e.exports=n)}("undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:void 0!==r.g?r.g:this)},6814:function(e,t,r){"use strict";var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.Formio=t.FormioPathType=void 0;const o=n(r(7559)),s=r(2373),i=r(6176),a=r(5391),c=n(r(6729)),u=n(r(4389)),{fetch:l,Headers:f}=(0,o.default)(),h=n(r(7689));var p;!function(e){e.Subdirectories="Subdirectories",e.Subdomains="Subdomains"}(p||(t.FormioPathType=p={}));class d{constructor(e,t={}){if(this.path=e,this.options=t,this.base="",this.projectsUrl="",this.projectUrl="",this.projectId="",this.roleUrl="",this.rolesUrl="",this.roleId="",this.formUrl="",this.formsUrl="",this.formId="",this.submissionsUrl="",this.submissionUrl="",this.submissionId="",this.actionsUrl="",this.actionId="",this.actionUrl="",this.vsUrl="",this.vId="",this.vUrl="",this.query="",this.noProject=!1,!(this instanceof d))return new d(e);if(t.useSessionToken&&d.useSessionToken(t),t.hasOwnProperty("base")&&t.base?this.base=t.base:d.baseUrl?this.base=d.baseUrl:window&&window.location&&(this.base=window.location.href.match(/http[s]?:\/\/api./)[0]),!e)return this.projectUrl=d.projectUrl||`${this.base}/project`,this.projectsUrl=`${this.base}/project`,this.projectId="",void(this.query="");t.hasOwnProperty("project")&&t.project&&(this.projectUrl=t.project);const r=this.projectUrl||d.projectUrl,n=/(^|\/)(project)($|\/[^/]+)/,o=-1!==e.search(n);r&&this.base===r&&!o&&(this.noProject=!0,this.projectUrl=this.base),0!==e.indexOf("http")&&0!==e.indexOf("//")&&(e=this.base+e);const s=this.getUrlParts(e);let i="",a=[];if(s){i=s[1]+s[2];const t=(e=s.length>3?s[3]:"").split("?");t.length>1&&(e=t[0],this.query=`?${t[1]}`)}const c=(t,r)=>{this[`${t}sUrl`]=`${r}/${t}`;const n=new RegExp(`/${t}/([^/]+)`);return e&&-1!==e.search(n)&&(a=e.match(n),this[`${t}Url`]=a?r+a[0]:"",this[`${t}Id`]=a.length>1?a[1]:"",r+=a[0]),r},u=(e,t,r)=>{for(const n in e)if(e.hasOwnProperty(n)){const o=e[n];if(Array.isArray(o))u(o,t,!0);else{const e=c(o,t);t=r?t:e}}};if(!this.projectUrl||this.projectUrl===this.base)if(this.projectUrl||o||"Subdirectories"!==d.pathType)this.projectUrl=i;else{const e=`^${i.replace(/\//g,"\\/")}.[^/]+`,t=r.match(new RegExp(e));this.projectUrl=t?t[0]:i}let l=!1;if(d.pathType&&(l="Subdomains"!==d.pathType),!this.noProject){if(o)u(["project"],i),e=e.replace(n,"");else if(i===this.base){if(s&&s.length>3&&e.split("/").length>1){const t=e.match(/.json/),r=e.split("/");if(t)this.projectUrl=i;else{r.shift();const t=r.shift();t&&(this.projectId=t,e=`/${r.join("/")}`,this.projectUrl=`${i}/${this.projectId}`)}}}else s&&s.length>2&&(s[2].split(".").length>2||i.includes("localhost"))&&!l&&(this.projectUrl=i,this.projectId=s[2].split(".")[0]);this.projectsUrl=this.projectsUrl||`${this.base}/project`}if(u(["role"],this.projectUrl),/(^|\/)(form)($|\/)/.test(e))u(["form",["submission","action","v"]],this.projectUrl);else{const t=new RegExp("/(submission|action|v)($|/.*)"),r=e.match(t);r&&r.length>1&&(this.pathType=r[1]),e=(e=e.replace(t,"")).replace(/\/$/,""),this.formsUrl=`${this.projectUrl}/form`,this.formUrl=e?this.projectUrl+e:"",this.formId=e.replace(/^\/+|\/+$/g,"");const n=["submission","action","v"];for(const t in n)if(n.hasOwnProperty(t)){const o=n[t];this[`${o}sUrl`]=`${this.projectUrl+e}/${o}`,this.pathType===o&&r&&r.length>2&&r[2]&&(this[`${o}Id`]=r[2].replace(/^\/+|\/+$/g,""),this[`${o}Url`]=this.projectUrl+e+r[0])}}d.projectUrlSet||(d.projectUrl=this.projectUrl)}delete(e,t){const r=`${e}Url`;return this[`${e}Id`]?(d.cache={},this.makeRequest(e,this[r],"delete",null,t)):Promise.reject("Nothing to delete")}index(e,t,r){const n=`${e}Url`;return(t=t||"")&&(0,s.isObject)(t)&&(t=`?${d.serialize(t.params)}`),this.makeRequest(e,this[n]+t,"get",null,r)}save(e,t,r){const n=`${e}Id`,o=`${e}Url`,s=this[n]||t._id?"put":"post";let i=this[n]?this[o]:this[`${e}sUrl`];return this[n]||!t._id||"put"!==s||i.includes(t._id)||(i+=`/${t._id}`),d.cache={},this.makeRequest(e,i+this.query,s,t,r)}load(e,t,r){const n=`${e}Id`,o=`${e}Url`;if(t&&(0,s.isObject)(t)&&(t=d.serialize(t.params)),t=t?this.query?`${this.query}&${t}`:`?${t}`:this.query,!this[n])return Promise.reject(`Missing ${n}`);let i=this[o]+t;return"form"!==e||isNaN(parseInt(this.vId))||(i+=-1===i.indexOf("?")?"?":"&",i+=`formRevision=${this.vId}`),this.makeRequest(e,i,"get",null,r)}makeRequest(e,t,r,n,o){return d.makeRequest(this,e,t,r,n,o)}loadProject(e,t){return this.load("project",e,t)}saveProject(e,t){return this.save("project",e,t)}deleteProject(e){return this.delete("project",e)}static loadProjects(e,t){return e=e||"",(0,s.isObject)(e)&&(e=`?${d.serialize(e.params)}`),d.makeStaticRequest(`${d.baseUrl}/project${e}`,"GET",null,t)}loadRole(e){return this.load("role",null,e)}saveRole(e,t){return this.save("role",e,t)}deleteRole(e){return this.delete("role",e)}loadRoles(e){return this.index("roles",null,e)}loadForm(e,t){return this.load("form",e,t).then((r=>!r.revisions||isNaN(parseInt(this.vId))||"current"===r.revisions&&this.submissionId||r._vid==this.vId||r.revisionId===this.vId?r:(e&&(0,s.isObject)(e)&&(e=d.serialize(e.params)),e=e?this.query?`${this.query}&${e}`:`?${e}`:this.query,this.makeRequest("form",this.vUrl+e,"get",null,t).then((e=>(r._vid=e._vid,r.components=e.components,r.settings=e.settings,r.revisionId=e.revisionId,Object.assign({},r)))).catch((()=>Object.assign({},r))))))}saveForm(e,t){return this.save("form",e,t)}deleteForm(e){return this.delete("form",e)}loadForms(e,t){return this.index("forms",e,t)}loadSubmission(e,t){return this.load("submission",e,t).then((e=>(this.vId=e._frid||e._fvid,this.vUrl=`${this.formUrl}/v/${this.vId}`,e)))}saveSubmission(e,t){return isNaN(parseInt(this.vId))||e._fvid||(e._fvid=this.vId),this.save("submission",e,t)}deleteSubmission(e){return this.delete("submission",e)}loadSubmissions(e,t){return this.index("submissions",e,t)}loadAction(e,t){return this.load("action",e,t)}saveAction(e,t){return this.save("action",e,t)}deleteAction(e){return this.delete("action",e)}loadActions(e,t){return this.index("actions",e,t)}availableActions(){return this.makeRequest("availableActions",`${this.formUrl}/actions`)}actionInfo(e){return this.makeRequest("actionInfo",`${this.formUrl}/actions/${e}`)}isObjectId(e){return new RegExp("^[0-9a-fA-F]{24}$").test(e)}getProjectId(){return this.projectId?this.isObjectId(this.projectId)?Promise.resolve(this.projectId):this.loadProject().then((e=>e._id)):Promise.resolve("")}getFormId(){return this.formId?this.isObjectId(this.formId)?Promise.resolve(this.formId):this.loadForm().then((e=>e._id)):Promise.resolve("")}currentUser(e){return d.currentUser(this,e)}accessInfo(){return d.accessInfo(this)}oauthLogoutURI(e,t){return d.oauthLogoutURI(e,Object.assign({formio:this},this.options,t))}getToken(e){return d.getToken(Object.assign({formio:this},this.options,e))}setToken(e,t){return d.setToken(e,Object.assign({formio:this},this.options,t))}getTempToken(e,t,r){if(!d.getToken(r))return Promise.reject("You must be authenticated to generate a temporary auth token.");const n=d.authUrl||this.projectUrl;return this.makeRequest("tempToken",`${n}/token`,"GET",null,{ignoreCache:!0,header:new f({"x-expire":e,"x-allow":t})})}getDownloadUrl(e){if(!this.submissionId)return Promise.resolve("");if(!e)return this.loadForm().then((e=>e?this.getDownloadUrl(e):""));let t=`/project/${e.project}`;t+=`/form/${e._id}`,t+=`/submission/${this.submissionId}`;const r=e.submissionRevisions&&e.settings.changeLog?"/download/changelog":"/download";t+=r;let n=this.base+t;return new Promise(((e,r)=>{this.getTempToken(3600,`GET:${t}`).then((t=>{n+=`?token=${t.key}`,e(n)}),(()=>{e(n)})).catch(r)}))}userPermissions(e,t,r){return Promise.all([void 0!==t?Promise.resolve(t):this.loadForm(),void 0!==e?Promise.resolve(e):this.currentUser(),void 0===r&&this.submissionId?this.loadSubmission():Promise.resolve(r),this.accessInfo()]).then((e=>{const t=e.shift(),r=e.shift()||{_id:!1,roles:[]},n=e.shift(),o=e.shift(),a={create:"create",read:"read",update:"edit",delete:"delete"},c={user:r,form:t,access:o,create:!1,read:!1,edit:!1,delete:!1};for(const e in o.roles)if(o.roles.hasOwnProperty(e)){const t=o.roles[e];if(t.default&&!1===r._id)r.roles.push(t._id);else if(t.admin&&-1!==r.roles.indexOf(t._id))return c.create=!0,c.read=!0,c.delete=!0,c.edit=!0,c}if(t&&t.submissionAccess)for(let e=0;e<t.submissionAccess.length;e++){const o=t.submissionAccess[e],[i,u]=o.type.split("_");["create","read","update","delete"].includes(i)&&(0,s.intersection)(o.roles,r.roles).length&&(c[a[i]]="all"===u||!n||r._id===n.owner)}return n&&(0,i.eachComponent)(t.components,((e,t)=>{if(e&&e.defaultPermission){const o=(0,s.get)(n.data,t);(Array.isArray(o)?o:[o]).forEach((t=>{t&&t._id&&r.roles.indexOf(t._id)>-1&&("read"===e.defaultPermission&&(c[a.read]=!0),"create"===e.defaultPermission&&(c[a.create]=!0,c[a.read]=!0),"write"===e.defaultPermission&&(c[a.create]=!0,c[a.read]=!0,c[a.update]=!0),"admin"===e.defaultPermission&&(c[a.create]=!0,c[a.read]=!0,c[a.update]=!0,c[a.delete]=!0))}))}})),c}))}canSubmit(){return this.userPermissions().then((e=>!e.create&&d.getUser()?this.userPermissions(null).then((e=>!!e.create&&(d.setUser(null),!0))):e.create))}getUrlParts(e){return d.getUrlParts(e,this)}static getUrlParts(e,t){const r=t&&t.base?t.base:d.baseUrl;let n="^(http[s]?:\\/\\/)";return r&&0===e.indexOf(r)?n+=`(${r.replace(/^http[s]?:\/\//,"")})`:n+="([^/]+)",n+="($|\\/.*)",e.match(new RegExp(n))}static serialize(e,t){const r=[];for(const o in e)e.hasOwnProperty(o)&&r.push(`${encodeURIComponent(o)}=${encodeURIComponent((n=e[o],t?t(n):n))}`);var n;return r.join("&")}static getRequestArgs(e,t,r,n,o,i){n=(n||"GET").toUpperCase(),i&&(0,s.isObject)(i)||(i={});const a={url:r,method:n,data:o||null,opts:i};return t&&(a.type=t),e&&(a.formio=e),a}static makeStaticRequest(e,t,r,n){const o=d.getRequestArgs(null,"",e,t,r,n),i=h.default.pluginWait("preRequest",o).then((()=>h.default.pluginGet("staticRequest",o).then((e=>(0,s.isNil)(e)?d.request(o.url,o.method,o.data,o.opts.header,o.opts):e))));return h.default.pluginAlter("wrapStaticRequestPromise",i,o)}static makeRequest(e,t,r,n,o,i){if(!e)return d.makeStaticRequest(r,n,o,i);const a=d.getRequestArgs(e,t,r,n,o,i);a.opts=a.opts||{},a.opts.formio=e,a.opts.headers||(a.opts.headers={}),a.opts.headers=(0,s.defaults)(a.opts.headers,{Accept:"application/json","Content-type":"application/json"});const c=h.default.pluginWait("preRequest",a).then((()=>h.default.pluginGet("request",a).then((e=>(0,s.isNil)(e)?d.request(a.url,a.method,a.data,a.opts.header,a.opts):e))));return h.default.pluginAlter("wrapRequestPromise",c,a)}static request(e,t,r,n,o){if(!e)return Promise.reject("No url provided");t=(t||"GET").toUpperCase(),(0,s.isBoolean)(o)&&(o={ignoreCache:o}),o&&(0,s.isObject)(o)||(o={});const i=btoa(encodeURI(e));if(!o.ignoreCache&&"GET"===t&&d.cache.hasOwnProperty(i))return Promise.resolve(d.cloneResponse(d.cache[i]));"/"===e[0]&&(e=d.baseUrl+e);const a=n||new f(o.headers||{Accept:"application/json","Content-type":"application/json"}),c=d.getToken(o);c&&!o.noToken&&a.append("x-jwt-token",c);const u={};a.forEach((function(e,t){u[t]=e}));let l={method:t,headers:u,mode:"cors"};r&&(l.body=JSON.stringify(r)),l=h.default.pluginAlter("requestOptions",l,e),(l.namespace||d.namespace)&&(o.namespace=l.namespace||d.namespace);const p=l.headers["x-jwt-token"],m=h.default.pluginAlter("wrapFetchRequestPromise",d.fetch(e,l),{url:e,method:t,data:r,opts:o}).then((n=>{if(!(n=h.default.pluginAlter("requestResponse",n,d,r)).ok){if(440===n.status)d.setToken(null,o),d.events.emit("formio.sessionExpired",n.body);else if(401===n.status)d.events.emit("formio.unauthorized",n.body);else if(416===n.status)d.events.emit("formio.rangeIsNotSatisfiable",n.body);else if(504===n.status)return Promise.reject(new Error("Network request failed"));return(n.headers.get("content-type").includes("application/json")?n.json():n.text()).then((e=>Promise.reject(e)))}const i=n.headers.get("x-jwt-token");let a=!1;return"GET"!==t||p||!i||o.external||e.includes("token=")||e.includes("x-jwt-token=")||(console.warn("Token was introduced in request."),a=!0),n.status>=200&&n.status<300&&i&&""!==i&&!a&&d.setToken(i,o),204===n.status?{}:(n.headers.get("content-type").includes("application/json")?n.json():n.text()).then((e=>{let t=n.headers.get("content-range");if(t&&(0,s.isObject)(e)){if(t=t.split("/"),"*"!==t[0]){const r=t[0].split("-");e.skip=Number(r[0]),e.limit=r[1]-r[0]+1}e.serverCount="*"===t[1]?t[1]:Number(t[1])}if(!o.getHeaders)return e;const r={};return n.headers.forEach(((e,t)=>{r[t]=e})),{result:e,headers:r}}))})).then((e=>o.getHeaders?e:("GET"===t&&(d.cache[i]=e),d.cloneResponse(e)))).catch((r=>("Bad Token"===r&&!1!==o.noToken&&(d.setToken(null,o),d.events.emit("formio.badToken",r)),r.message&&((r=new Error(`Could not connect to API server (${r.message}): ${e}`)).networkError=!0),"GET"===t&&delete d.cache[i],Promise.reject(r))));return m}static get token(){return d.tokens.formioToken||""}static set token(e){d.tokens.formioToken=e||""}static useSessionToken(e){let t=e;"object"==typeof e&&(e=e.namespace);const r=`${t||d.namespace||"formio"}Token`,n=localStorage.getItem(r);n&&(localStorage.removeItem(r),sessionStorage.setItem(r,n));const o=`${t||d.namespace||"formio"}User`,s=localStorage.getItem(o);s&&(localStorage.removeItem(o),sessionStorage.setItem(o,s)),localStorage.setItem("useSessionToken","true")}static setToken(e="",t={}){e=e||"";const r=`${(t="string"==typeof t?{namespace:t}:t||{}).namespace||d.namespace||"formio"}Token`;d.tokens||(d.tokens={});const n=localStorage.getItem("useSessionToken")?sessionStorage:localStorage;if(!e){t.fromUser||(t.fromToken=!0,d.setUser(null,t));try{n.removeItem(r)}catch(e){u.default.erase(r,{path:"/"})}return d.tokens[r]=e,Promise.resolve(null)}if(d.tokens[r]!==e){d.tokens[r]=e;try{n.setItem(r,e)}catch(t){u.default.set(r,e,{path:"/"})}}return d.currentUser(t.formio,t)}static getToken(e){const t=`${(e="string"==typeof e?{namespace:e}:e||{}).namespace||d.namespace||"formio"}Token`,r=e.decode?`${t}Decoded`:t;if(d.tokens||(d.tokens={}),d.tokens[r])return d.tokens[r];try{const n=localStorage.getItem("useSessionToken")?sessionStorage.getItem(t):localStorage.getItem(t);return d.tokens[t]=n||"",e.decode?(d.tokens[r]=d.tokens[t]?(0,a.jwtDecode)(d.tokens[t]):{},d.tokens[r]):d.tokens[t]}catch(e){return d.tokens[t]=u.default.get(t),""}}static setUser(e,t={}){const r=`${t.namespace||d.namespace||"formio"}User`,n=localStorage.getItem("useSessionToken")?sessionStorage:localStorage;if(!e){t.fromToken||(t.fromUser=!0,d.setToken(null,t)),d.events.emit("formio.user",null);try{return n.removeItem(r)}catch(e){return u.default.erase(r,{path:"/"})}}try{n.setItem(r,JSON.stringify(e))}catch(t){u.default.set(r,JSON.stringify(e),{path:"/"})}d.events.emit("formio.user",e)}static getUser(e){const t=`${(e=e||{}).namespace||d.namespace||"formio"}User`;try{return JSON.parse((localStorage.getItem("useSessionToken")?sessionStorage:localStorage).getItem(t)||"")}catch(e){return JSON.parse(u.default.get(t))}}static setBaseUrl(e){d.baseUrl=e,d.projectUrlSet||(d.projectUrl=e)}static getBaseUrl(){return d.baseUrl}static setApiUrl(e){return d.setBaseUrl(e)}static getApiUrl(){return d.getBaseUrl()}static setAppUrl(e){console.warn("Formio.setAppUrl() is deprecated. Use Formio.setProjectUrl instead."),d.projectUrl=e,d.projectUrlSet=!0}static setProjectUrl(e){d.projectUrl=e,d.projectUrlSet=!0}static setAuthUrl(e){d.authUrl=e}static getAppUrl(){return console.warn("Formio.getAppUrl() is deprecated. Use Formio.getProjectUrl instead."),d.projectUrl}static getProjectUrl(){return d.projectUrl}static clearCache(){d.cache={}}static accessInfo(e){const t=e?e.projectUrl:d.projectUrl;return d.makeRequest(e,"accessInfo",`${t}/access`)}static projectRoles(e){const t=e?e.projectUrl:d.projectUrl;return d.makeRequest(e,"projectRoles",`${t}/role`)}static currentUser(e,t={}){let r=d.authUrl;if(r||(r=e?e.projectUrl:d.projectUrl||d.baseUrl),r+="/current",!t.ignoreCache||t.fromCurrent){const e=d.getUser(t);if(e)return h.default.pluginAlter("wrapStaticRequestPromise",Promise.resolve(e),{url:r,method:"GET",options:t})}const n=d.getToken(t);return t&&t.external||n?(t.fromCurrent=!0,d.makeRequest(e,"currentUser",r,"GET",null,t).then((e=>(d.setUser(e,t),e)))):h.default.pluginAlter("wrapStaticRequestPromise",Promise.resolve(null),{url:r,method:"GET",options:t})}static logout(e,t={}){t.formio=e;const r=d.authUrl?d.authUrl:e?e.projectUrl:d.baseUrl,n=()=>{d.setToken(null,t),d.setUser(null,t),d.clearCache(),localStorage.removeItem("useSessionToken")};return d.makeRequest(e,"logout",`${r}/logout`).then((function(e){return n(),e.shouldRedirect&&e.url&&(window.location.href=e.url),e})).catch((function(e){throw n(),e}))}static pageQuery(){const e={paths:[]},t=location.hash.substr(1).replace(/\?/g,"&").split("&");let r=[];return location.search.substr(1).split("&").forEach((function(t){r=t.split("="),r.length>1&&(e[r[0]]=r[1]&&decodeURIComponent(r[1]))})),t.forEach((function(t){r=t.split("="),r.length>1?e[r[0]]=r[1]&&decodeURIComponent(r[1]):0===t.indexOf("/")&&(e.paths=t.substr(1).split("/"))})),e}static oAuthCurrentUser(e,t){return d.currentUser(e,{external:!0,headers:{Authorization:`Bearer ${t}`}})}static oauthLogoutURI(e,t){const r=`${(t="string"==typeof t?{namespace:t}:t||{}).namespace||d.namespace||"formio"}LogoutAuthUrl`;return d.tokens[r],localStorage.setItem(r,e),d.tokens[r]}static samlInit(e={}){const t=d.pageQuery();if(t.saml){d.setUser(null);const e=d.setToken(t.saml);let r=window.location.toString();return r=r.substring(0,r.indexOf("?")),window.location.hash&&(r+=window.location.hash),window.history.replaceState({},document.title,r),e}e.relay||(e.relay=window.location.href);const r=d.authUrl||d.projectUrl;return window.location.href=`${r}/saml/sso?relay=${encodeURI(e.relay)}`,!1}static oktaInit(e={}){if(void 0!==typeof OktaAuth&&(e.OktaAuth=OktaAuth),void 0===typeof e.OktaAuth){const e="Cannot find OktaAuth. Please include the Okta JavaScript SDK within your application. See https://developer.okta.com/code/javascript/okta_auth_sdk for an example.";return console.warn(e),Promise.reject(e)}return new Promise(((t,r)=>{const n=e.OktaAuth;delete e.OktaAuth;const o=new n(e);o.tokenManager.get("accessToken").then((n=>{n?t(d.oAuthCurrentUser(e.formio,n.accessToken)):location.hash?o.token.parseFromUrl().then((r=>{o.tokenManager.add("accessToken",r),t(d.oAuthCurrentUser(e.formio,r.accessToken))})).catch((e=>{console.warn(e),r(e)})):(o.token.getWithRedirect({responseType:"token",scopes:e.scopes}),t(!1))})).catch((e=>{r(e)}))}))}static ssoInit(e,t={}){switch(e){case"saml":return d.samlInit(t);case"okta":return d.oktaInit(t);default:return console.warn("Unknown SSO type"),Promise.reject("Unknown SSO type")}}static requireLibrary(e,t,r,n=!1,o){if(!d.libraries.hasOwnProperty(e)){d.libraries[e]={},d.libraries[e].ready=new Promise(((t,r)=>{d.libraries[e].resolve=t,d.libraries[e].reject=r}));const i=`${e}Callback`;n||window[i]||(window[i]=()=>d.libraries[e].resolve());const a=(0,s.get)(window,t);if(a)d.libraries[e].resolve(a);else if((r=Array.isArray(r)?r:[r]).forEach((t=>{let r={},n="";switch("string"==typeof t&&(t={type:"script",src:t}),t.type){case"script":n="script",r={src:t.src,type:"text/javascript",defer:!0,async:!0,referrerpolicy:"origin"};break;case"styles":n="link",r={href:t.src,rel:"stylesheet"}}const s=document.createElement(n);if(s.setAttribute)for(const e in r)s.setAttribute(e,r[e]);o&&s.addEventListener("load",(()=>{d.libraries[e].loaded=!0,o(d.libraries[e].ready)}));const{head:i}=document;i&&i.appendChild(s)})),n){const r=setInterval((()=>{const n=(0,s.get)(window,t);n&&(clearInterval(r),d.libraries[e].resolve(n))}),200)}}const i=d.libraries[e];return o&&i.loaded?o(i.ready):i.ready}static libraryReady(e){return d.libraries.hasOwnProperty(e)&&d.libraries[e].ready?d.libraries[e].ready:Promise.reject(`${e} library was not required.`)}static cloneResponse(e){const t=(0,s.fastCloneDeep)(e);return Array.isArray(e)&&(t.skip=e.skip,t.limit=e.limit,t.serverCount=e.serverCount),t}static setPathType(e){"string"==typeof e&&(d.pathType=e)}static getPathType(){return d.pathType}}t.Formio=d,d.baseUrl="https://api.form.io",d.projectUrl="",d.authUrl="",d.projectUrlSet=!1,d.cache={},d.namespace="",d.events=new c.default,d.libraries={},d.fetch=l,d.Headers=f,d.tokens={},d.version="---VERSION---",d.plugins=h.default.plugins,d.deregisterPlugin=h.default.deregisterPlugin,d.registerPlugin=h.default.registerPlugin,d.getPlugin=h.default.getPlugin,d.pluginWait=h.default.pluginWait,d.pluginGet=h.default.pluginGet,d.pluginAlter=h.default.pluginAlter,h.default.Formio=d},7689:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n=r(2373);class o{static identity(e){return e}static deregisterPlugin(e){const t=o.plugins.length;return o.plugins=o.plugins.filter((t=>t!==e&&t.__name!==e||((t.deregister||n.noop).call(e,o.Formio),!1))),t!==o.plugins.length}static registerPlugin(e,t){o.plugins.push(e),o.plugins.sort(((e,t)=>(t.priority||0)-(e.priority||0))),e.__name=t,(e.init||n.noop).call(e,o.Formio)}static getPlugin(e){for(const t of o.plugins)if(t.__name===e)return t;return null}static pluginWait(e,...t){return Promise.all(o.plugins.map((r=>(r[e]||n.noop).call(r,...t))))}static pluginGet(e,...t){const r=s=>{const i=o.plugins[s];return i?Promise.resolve((i[e]||n.noop).call(i,...t)).then((e=>(0,n.isNil)(e)?r(s+1):e)):Promise.resolve(null)};return r(0)}static pluginAlter(e,t,...r){return o.plugins.reduce(((t,n)=>(n[e]||o.identity)(t,...r)),t)}}o.plugins=[],t.default=o},6550:function(e,t,r){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var o=Object.getOwnPropertyDescriptor(t,r);o&&!("get"in o?!t.__esModule:o.writable||o.configurable)||(o={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,o)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),o=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),s=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)"default"!==r&&Object.prototype.hasOwnProperty.call(e,r)&&n(t,e,r);return o(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.Evaluator=t.BaseEvaluator=void 0;const i=s(r(2373));class a{static evaluator(e,...t){return c.noeval?(console.warn("No evaluations allowed for this renderer."),i.noop):"function"==typeof e?e:("object"==typeof t[0]&&(t=i.keys(t[0])),new Function(...t,e))}static interpolateString(e,t,r={}){return e.replace(/({{\s*(.*?)\s*}})/g,((e,n,o)=>{if(-1!==o.indexOf("("))return o.replace(/([^\(]+)\(([^\)]+)\s*\);?/,((e,n,o)=>{n=i.trim(n);const s=i.get(t,n);return s?(o&&(o=o.split(",").map((e=>0===(e=i.trim(e)).indexOf('"')||0===e.indexOf("'")?e.substring(1,e.length-1):i.get(t,e)))),c.evaluate(s,o,"",!1,t,r)):""}));{let e=o;-1!==o.indexOf("?")&&(e=o.replace(/\?\./g,"."));const n=e.split("||").map((e=>e.trim()));let s="",a="";for(let e=0;e<n.length&&(a=n[e],s=i.get(t,a),!s);e++);return r.data&&i.set(r.data,a,s),s}}))}static interpolate(e,t,r={}){if("function"==typeof e)try{return e(t)}catch(e){return console.warn("Error interpolating template",e,t),e.message}return c.interpolateString(String(e),t,r)}static evaluate(e,t={},r="",n=!1,o={},s={}){let u=null;s=i.isObject(s)?s:{noeval:s};const l=t.component?t.component:{key:"unknown"};!t.form&&t.instance&&(t.form=i.get(t.instance,"root._form",{}));const f=l.key;if("string"==typeof e){r&&(e+=`;return ${r}`),n&&(e=a.interpolate(e,t,s));try{e=c.noeval||s.noeval?i.noop:c.evaluator(e,t,o),t=i.values(t)}catch(t){console.warn(`An error occured within the custom function for ${f}`,t),u=null,e=!1}}if("function"==typeof e)try{u=c.execute(e,t,o,s)}catch(e){u=null,console.warn(`An error occured within custom function for ${f}`,e)}else e&&console.warn(`Unknown function type for ${f}`);return u}static execute(e,t,r={},n={}){if(n=i.isObject(n)?n:{noeval:n},!c.noeval&&!n.noeval)return Array.isArray(t)?e.apply(r,t):e.call(r,t);console.warn("No evaluations allowed for this renderer.")}}t.BaseEvaluator=a,a.templateSettings={interpolate:/{{([\s\S]+?)}}/g,evaluate:/\{%([\s\S]+?)%\}/g,escape:/\{\{\{([\s\S]+?)\}\}\}/g},a.noeval=!1;class c extends a{static registerEvaluator(e){Object.keys(e).forEach((t=>{c[t]=e[t]}))}}t.Evaluator=c},6176:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.uniqueName=t.guid=t.flattenComponents=t.eachComponent=void 0;const n=r(6550),o=r(2373);function s(e,t,r,n,o){e&&(n=n||"",e.forEach((i=>{if(!i)return;const a=i.columns&&Array.isArray(i.columns),c=i.rows&&Array.isArray(i.rows),u=i.components&&Array.isArray(i.components);let l=!1;const f=i.key?n?`${n}.${i.key}`:i.key:"";o&&(i.parent=Object.assign({},o),delete i.parent.components,delete i.parent.componentMap,delete i.parent.columns,delete i.parent.rows);const h=a||c||u||["htmlelement","content"].indexOf(i.type)>-1;(r||i.tree||!h)&&(l=t(i,f,e));const p=()=>i.key&&!["panel","table","well","columns","fieldset","tabs","form"].includes(i.type)&&(["datagrid","container","editgrid","address","dynamicWizard"].includes(i.type)||i.tree)?f:i.key&&"form"===i.type?`${f}.data`:n;l||(a?i.columns.forEach((e=>s(e.components,t,r,p(),o?i:null))):c?i.rows.forEach((e=>{Array.isArray(e)&&e.forEach((e=>s(e.components,t,r,p(),o?i:null)))})):u&&s(i.components,t,r,p(),o?i:null))})))}function i(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,(e=>{const t=16*Math.random()|0;return("x"===e?t:3&t|8).toString(16)}))}t.eachComponent=s,t.flattenComponents=function(e,t){const r={};return s(e,((e,t)=>{r[t]=e}),t),r},t.guid=i,t.uniqueName=function(e,t,r){(t=t||"{{fileName}}-{{guid}}").includes("{{guid}}")||(t=`${t}-{{guid}}`);const s=e.split(".");let a=s.slice(0,s.length-1).join(".");const c=s.length>1?`.${(0,o.last)(s)}`:"";return a=a.substr(0,100),r=Object.assign(r||{},{fileName:a,guid:i()}),`${n.Evaluator.interpolate(t,r)}${c}`.replace(/[^0-9a-zA-Z.\-_ ]/g,"-")}},5391:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.jwtDecode=void 0,t.jwtDecode=function(e,t={}){if("string"!=typeof e)throw new Error("Invalid token specified: must be a string");const r=!0===t.header?0:1,n=e.split(".")[r];if("string"!=typeof n)throw new Error("Invalid token specified: missing part #"+(r+1));let o;try{o=function(e){let t=e.replace(/-/g,"+").replace(/_/g,"/");switch(t.length%4){case 0:break;case 2:t+="==";break;case 3:t+="=";break;default:throw new Error("base64 string is not of the correct length")}try{return function(e){return decodeURIComponent(atob(e).replace(/(.)/g,(function(e,t){let r=t.charCodeAt(0).toString(16).toUpperCase();return r.length<2&&(r="0"+r),"%"+r})))}(t)}catch(e){return atob(t)}}(n)}catch(e){throw new Error("Invalid token specified: invalid base64 for part #"+(r+1)+" ("+e.message+")")}try{return JSON.parse(o)}catch(e){throw new Error("Invalid token specified: invalid json for part #"+(r+1)+" ("+e.message+")")}}}},t={};function r(n){var o=t[n];if(void 0!==o)return o.exports;var s=t[n]={exports:{}};return e[n].call(s.exports,s,s.exports,r),s.exports}r.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}();var n={};return function(){"use strict";var e=n;Object.defineProperty(e,"__esModule",{value:!0}),e.Formio=void 0;var t=r(6814);Object.defineProperty(e,"Formio",{enumerable:!0,get:function(){return t.Formio}})}(),n}()}));